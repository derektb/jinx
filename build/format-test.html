<!DOCTYPE html>
<html class="jinx-page">
<head>
<title>
Jinx Tests

</title>
<meta charset="utf-8">
<link rel="stylesheet" href="jinx.css">
</head>
<body>

<div id="passages"></div>



<div id="version-marker">0.0.0</div>

<tw-storydata name="Jinx Tests
" startnode="1" creator="Twine" creator-version="2.0">

<style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">
a:not([data-passage]):first-child
{
	color: green;
}

.__show-layers#passages, .__show-layers .panel, .__show-layers .layer {
	perspective: 1000px;
	transform-style: preserve-3d;
}

div#passages {
	border: 2px solid #9b8;
	border-bottom: 4px solid #695;
	border-radius: 10px;
	margin-bottom: 1em;
	padding: 1em;
}

.layer.css-border {
	background-image: url("test-art/frames/background/border.png");
	background-size: cover;
}

.test-failing {
	background-color: rgba(255,0,32,0.4);
}

.test-unknown {
	background-color: black;
	color: white;
}

.test-passing {
	background-color: rgba(64,255,32, 0.1)
}

/*@keyframes fadeIn {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}*/

.passage.big-panel .panel {
	position: relative;
	height: 600px; width: 600px;
}

.passage.big-panel .panel .asset {
	width: 100%;
}


code {
  background-color: rgba(0,0,0,0.1);
  padding: 0.1em 0.3em;
  border-radius: 0.3em;
}

#version-marker {
  position: fixed;
  bottom: 0;
  right: 0;
  padding: .25em;
  background-color: white;
  color: black;
  font-style: italic;
  border-top-left-radius: 5px;
}

</style>

<script role="script" id="twine-user-script" type="text/twine-javascript">
console.log('User JavaScript is working.');

window.story.state.rootArtPath = "test-art/frames/";
jinx.setup({
  rootArtPath: "test-art/frames/"
});
jinx.debug();

var hideLayers = window.hideLayers = function hideLayers() {
  var images = document.querySelectorAll(".panel .layer img, .css-border")
  snabbt(document.querySelector('.panel'), {rotation: [0,0,0], easing: function easeOutCubic(t) { return 1+(--t)*t*t }, duration: 250});

  snabbt(images, {position: [0,0,0],
    easing: function easeOutCubic(t) { return 1+(--t)*t*t },
    duration: 300, delay: 50, complete: function(){
      $('#passages').removeClass("__show-layers");
    }});
}

var showLayers = window.showLayers = function showLayers(){
  var images = document.querySelectorAll(".panel .layer img, .css-border")
  $('#passages').addClass("__show-layers");
  snabbt(images, {fromPosition: [0,0,0], position: function(i, total){
  var val = (i-(total/2))*30;
  return [0, 0, val];
  },
  easing: function easeOutCubic(t) { return 1+(--t)*t*t },
  duration: 300, delay: 50});

  snabbt(document.querySelector('.panel'), {
    fromRotation: [0,0,0],
    rotation: [-1.2,0.5,0],
    easing: function easeOutCubic(t) { return 1+(--t)*t*t },
    duration: 250,
  });
}

</script>

<tw-passagedata pid="1" name="Start" tags="replace">
Snowman Tests
---
[[Main Test Body]]

- [[Test embedding a passage in another->embed test]]
- [[Test $ function]]
- [[Test span and div syntax]]
- [[Test comments]]

-----
Jinx Tests
<a href="./test.html">QUNIT</a>
---
<em>from testPassages</em>

<ul>
  <h3>Jinx 0.1</h3>

<li class="test-failing">[[Test 0.1.0 Panel->Test 0.1.0 Panel]] — This should: define a panel with a single art object and a destination to display this passage upon clicking the #wand.  !!The API in this test is deprecated: it ONLY adds art and a destination.  The panel adds a default layer and the wand navigates correctly, but no animation is defined, and no art displays: possibly we assumed in the past that this would be a valid way of defining a panel.  It isn't any more.</li>

</ul>

<ul>
  <h3>Jinx 0.2</h3>

<li class="test-passing">[[0_2_panel->0_2_panel]] — This should be a multi-layer panel.  Three layers with three separate art 300px assets.  A Sequence exists which defines which art goes where.</li>

<li class="test-failing">[[Test 0.2.0 Panel (Override Version)->Test 0.2.0 Panel (Override Version)]] — The same as before, except an 'override' property has been set to 'true', allowing Sequence Step definitions to define new layers when none are found.  *On second thought, this is slightly risky, since layers are an order-matters array, so possibly this is a bad idea.*</li>

</ul>

<ul>
  <h3>Jinx 0.4</h3>

<li class="test-passing">[[Test Panel.addArtAssets and Panel.addLayers->test addArtAssets]] — Tests two new condensed methods for adding multiple art assets and layers at once</li>

<li class="test-passing">[[Test 'Panelize' Tag and Auto Panelization->test auto panelize]] — Panels tagged with 'panelize' should automatically append the proper Underscore and Jinx markup for panelizing a passage.</li>

<li class="test-passing">[[Manager Dog 0.4 (Snippet)->manager-dog 0.4.0 condensed]] — Tests condensed panel creation (`p.addArtAssets`, `p.addLayers`, `p.step.create`), as well as condensed seqel markup (`a,l,p,e,d,s,f`) and general 0.4 sync/delay timing properties</li>

<li class="test-passing">[[Manager Dog 0.4 One-Shot->manager-dog 040 condensed one-shot]] — The same as manager dog 0.4, but goes through the whole comic.</li>

</ul>

<ul>
  <h3>Jinx 0.5</h3>

<li class="test-passing">[[New Animation Pipeline->New Animation Pipeline]] — Rigorously tests everything that broke in 0.4 which should work in 0.5</li>

<li class="test-passing">[[ArtAsset.type 'asset'->ArtAsset Class]] — Tests that art assets may be created as 'asset' type ArtAssets rather than the 'image' type that has now become a default.  Images should be displayed within divs in this version.'</li>

</ul>

<ul>
  <h3>Jinx 0.6</h3>

<li class="test-passing">[[Refactoring loading->custom-effects__loading-refactoring]] — In 0.5, loading was written poorly, in a way that assumes all steps will have assets that load.  When a step only removes assets, for example, it will load infinitely.  This fixes that by first checking to see if it needs to load before waiting to load.</li>

<li class="test-passing">[[Positionable assets with XY property->custom-effects__xy-property]] — Assets should be positionable via the 'xy' seqel property: this is a two-item array.  This test will pass if the assets 1,2,3 appear in a diagonal line, and will fail if they all just appear in the corner.</li>

<li class="test-passing">[[Positionable assets with XY property: Relative positioning from effect->custom-effects__xy-property--relative-position]] — The same as the previous test, except there is positioning data in the effect as well.  That will be interpreted as 'relative positioning' and be added to the 'absolute positioning' of the xy property</li>

<li class="test-passing">[[CSS-Classing Passage Tags->css-class-passage-tags]] — Passages should be able to take custom CSS classes via passage tags; tags beginning with a period will be appended as css classes.  This passage should be extremely large, as it adds the class `.big-panel`</li>

<li class="test-passing">[[Snabbt Custom Effects: Snabbt hash effect->custom-effects__snabbt-whole-effect]] — This test has an effect entirely defined within a snabbt hash, including timing information. If created correctly, 1 should quickly strobe into visibility, followed by 2 more slowly strobing into visibility.</li>

<li class="test-passing">[[Snabbt Custom Effects: Snabbt hash with timing in the seqel->custom-effects__snabbt-partial-effect-with-timing]] — This test has an effect defined by a snabbt hash, but with timing defined within the seqel.</li>

<li class="test-passing">[[Snabbt Custom Effects: Predefined effect creation->custom-effects__snabbt-predefined-effect-creation]] — Tests the creation and usage of predefined effects, including both animation and timing. In this test: 1,2,3 should appear all at the same time.</li>

<li class="test-passing">[[Snabbt Custom Effects: Predefined effect overridden partially by seqel->custom-effects__snabbt-predefined-effect-overridden]] — Tests overriding a predefined effect.  Predefined effects will be overridden by seqel properties.  In this test, we use a predefined effect, but override its timing: 1,2,3 should appear and disappear at 3 different times.</li>

<li class="test-passing">[[Snabbt Custom Effects: Predefined effect - Extending predefined effects->custom-effects__snabbt-predefined-effect-extension]] — Tests the extension of predefined effects.  This test defines an effect that fades and zooms from 0 to 1 over one second; and then extends that effect, overriding it so that it zooms out from 5 to 1 and takes two seconds to complete.</li>

<li class="test-passing">[[Snabbt Custom Effects: Snabbt Callbacks->custom-effects__snabbt-callbacks]] — Custom effect hashes can include callbacks which will hook into predefined snabbt callback hooks, such as `start()`, `update()`, and `complete()`. This particular test adds at `start()` an event listener which will listen for the animation to end (0.5) and fire an `alert()` when it has.</li>

<li class="test-failing">[[Transition Steps: Pre-Transition Step->transition-steps--pre]] — Tests creation of steps that run when advancing between panels, after the 'final' step, but before the next panel is displayed.</li>

<li class="test-failing">[[Transition Steps: Post-Transition Step->transition-steps--post]] — Tests creation of steps that run on a panel once the subsequent advanced-to panel has been displayed.  In this test, 1,2,3 will be removed once the new panel has been displayed after a short pause</li>

<li class="test-passing">[[Seqel 'Effect' Apply->seqel-apply--effect]] — Tests the 'effect' apply seqel, which will neither add nor remove an asset but just animate it.</li>

<li class="test-passing">[[Panel.art.path()->panel-art--panel-path]] — Tests ability to set panel-specific path (appended after rootArtPath), for DRYer art asset creation.  Path may also be escaped by passing `path: false` into a hash for the art asset</li>

<li class="test-passing">[[Code Seqel->code-seqel]] — Tests creation of code seqels, which will run in sequence along with the rest of the animation.  This should be just like the snabbt callbacks test, except in this one, the alert is being generated by a code seqel a the end of the step.</li>

</ul>

<ul>
  <h3>Jinx 0.7</h3>

<li class="test-passing">[[Text Assets->text-assets]] — Tests creation of text assets, of fixed height, width, and both.</li>

<li class="test-passing">[[ArtAssets With Custom Classes->custom-asset-classnames]] — Art assets may now be created with user-defined classnames as an array of strings called classNames on the artasset.</li>

</ul>

<ul>
  <h3>Unversioned</h3>

<li class="test-passing">[[Grunt-Built Testing Suite->helloworld]] — A Passage built entirely with Grunt</li>

<li class="test-passing">[[Test Replacement->Test Replacement]] — Tests that passages tagged with 'replace' will replace all passages in div#passages.</li>

</ul>

<em>handwritten</em>
- !!FAILING [[Test 0.2.0 Panel (Override Version)]] - The same as before, except an 'override' property has been set to 'true', allowing Sequence Step definitions to define new layers when none are found.  *On second thought, this is slightly risky, since layers are an order-matters array, so possibly this is a bad idea.*
- !!FAILING [[Test 0.2.0 Panel (Shortcut)]] - A version of initial Sequence step definition that allows for a PlainObject of `artAssetName: layerName` properties to serve as the sole argument, saving you, the user, a lot of repetitive `p.seq.addSeqel` calls. &lt;/span&gt;
- [[Manager Dog 0.2.0->manager-dog-p1-020]] - This should be four multi-layer panels; the full manager dog comic, with its art built in layers.

- [[Test Wand Proper Relocation]]
- [[Test Iterative Panel]] - This is a panel with three steps.  This should first show the panel with the background and border.  The next step shows Manager Dog himself.  The next step adds his dialogue.
- !!FAILING (REPLACE DOESN'T WORK) [[Test One-Shot Manager Dog]] - This overloaded panel shows the entire manager dog comic inside a single iterative panel.;
- [[Manager Dog 0.3.0->manager-dog-p1 0.3.0]] - Manager dog in multiple panels

- !!FAILING [[Manager Dog 0.4.0 Snabbt Test->manager-dog 0.4.0]] - A single beat from manager dog, coordinated with snabbt.  Uses constructors that build steps rather than seqels.
- !!FAILING [[Manager Dog 0.4.0 Snabbt Test (condensed)->manager-dog 0.4.0 condensed]] - The same as the previous test, but with abbreviated prop names and without explicit definitions for things we want Jinx to do automagically.

-----

*Build 0.0.0 was created at: WED 21 AUG 2019, 8:31:31 PM*
</tw-passagedata>

<!-- grunt-built passages -->


  <tw-passagedata pid="20" name="helloworld" tags="replace">
    &lt;% var amet = &#x27;amet&#x27; %&gt;
lorem
ipsum
dolor
sit
&lt;%= amet %&gt;

  </tw-passagedata>

  <tw-passagedata pid="21" name="Test Replacement" tags="replace">
    Hey!  Where&#x27;d everybody go!

Was it something I said?
~Derek

  </tw-passagedata>

  <tw-passagedata pid="22" name="Test 0.1.0 Panel" tags="replace">
    &lt;%$(function(){window.passage.panelize(function(p) {
  p.addArt(&quot;main&quot;,&quot;test-art/frames/background/background-1.png&quot;);
  p.destination = { main: &quot;[[Start]]&quot; };
})});%&gt;

  </tw-passagedata>

  <tw-passagedata pid="23" name="0_2_panel" tags="replace">
    &lt;%$(function(){window.passage.panelize(function(p) {
  p.addArt(&quot;background-art&quot;,&quot;background/background-1.png&quot;);
  p.addArt(&quot;character-art&quot;,&quot;../character.png&quot;);
  p.addArt(&quot;speech-art&quot;,&quot;../speech.png&quot;);

  p.addLayer(&quot;background&quot;);
  p.addLayer(&quot;character&quot;);
  p.addLayer(&quot;speech&quot;);
  p.addLayer(&quot;css-border&quot;);

  p.seq.addSeqel(&quot;background-art&quot;,&quot;background&quot;);
  p.seq.addSeqel(&quot;character-art&quot;,&quot;character&quot;);
  p.seq.addSeqel(&quot;speech-art&quot;,&quot;speech&quot;);

  p.destination = { main: &quot;[[Start]]&quot; };
})});%&gt;

  </tw-passagedata>

  <tw-passagedata pid="24" name="Test 0.2.0 Panel (Override Version)" tags="replace">
    &lt;%$(function(){window.passage.panelize(function(p) {
  p.seq.override = true // define layers during Step / Sequence creation

  p.addArt(&quot;background-art&quot;,&quot;background/background-1.png&quot;);
  p.addArt(&quot;character-art&quot;,&quot;../character.png&quot;);
  p.addArt(&quot;speech-art&quot;,&quot;../speech.png&quot;);

  p.seq.addSeqel(&quot;background-art&quot;,&quot;background&quot;);
  p.seq.addSeqel(&quot;character-art&quot;,&quot;character&quot;);
  p.seq.addSeqel(&quot;speech-art&quot;,&quot;speech&quot;);

  p.destination = { main: &quot;[[Start]]&quot; };
})});%&gt;

  </tw-passagedata>

  <tw-passagedata pid="25" name="test addArtAssets" tags="replace">
    &lt;%$(function(){window.passage.panelize(function(p) {
p.addArtAssets(
['bga','background/background-1.png'], ['1-char', '1/character.png'], ['1-sp', '1/speech.png'],
['2-char', '2/character.png'], ['2-effect', '2/effect.png'], ['2-sp', '2/speech.png']
);
p.addLayers('bg', 'char', 'speech', 'css-border')
p.seq.addSeqel('bga', 'bg');
p.seq.addSeqel('1-char', 'char');
p.seq.addSeqel('1-sp', 'speech','stop');
p.seq.addSeqel('2-effect', 'speech', 'replace', 'stop');
p.seq.addSeqel('2-char', 'char', 'replace', 'on');
p.seq.addSeqel('2-sp', 'speech','stop');
p.destination = { main: '[[Start]]' };
})});%&gt;
  </tw-passagedata>

  <tw-passagedata pid="26" name="test auto panelize" tags="replace panelize">
    p.addArtAssets(
['bga','background/background-1.png'], ['1-char', '1/character.png'], ['1-sp', '1/speech.png'],
['2-char', '2/character.png'], ['2-effect', '2/effect.png'], ['2-sp', '2/speech.png']
);
p.addLayers('bg', 'char', 'speech', 'css-border')
p.seq.addSeqel('bga', 'bg');
p.seq.addSeqel('1-char', 'char');
p.seq.addSeqel('1-sp', 'speech','stop');
p.seq.addSeqel('2-effect', 'speech', 'replace', 'stop');
p.seq.addSeqel('2-char', 'char', 'replace', 'on');
p.seq.addSeqel('2-sp', 'speech','stop');
p.destination = { main: '[[Start]]' };
  </tw-passagedata>

  <tw-passagedata pid="27" name="manager-dog 0.4.0 condensed" tags="replace panelize">
    window.jinx.setDefaults({duration:150})
p.addArtAssets(
  [&#x27;bga&#x27;,&#x27;background/background-1.png&#x27;],
  [&#x27;1-char&#x27;, &#x27;1/character.png&#x27;],
  [&#x27;1-sp&#x27;, &#x27;1/speech.png&#x27;],
  
  [&#x27;2-char&#x27;, &#x27;2/character.png&#x27;],
  [&#x27;2-effect&#x27;, &#x27;2/effect.png&#x27;],
  [&#x27;2-sp&#x27;, &#x27;2/speech.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;char&#x27;, &#x27;speech&#x27;, &#x27;css-border&#x27;)
p.step.create({a: &#x27;bga&#x27;, l: &#x27;bg&#x27;, delay: 100},
  {a: &#x27;1-char&#x27;, l: &#x27;char&#x27;, delay: 100},
  {a: &#x27;1-sp&#x27;, l: &#x27;speech&#x27;, s: &#x27;after&#x27;, d: 200, duration: 600});
p.step.create({p: &#x27;remove&#x27;, l: &#x27;speech&#x27;, duration: 500},
  {a: &#x27;2-effect&#x27;, l: &#x27;speech&#x27;, s: &#x27;after&#x27;, d: 200},
  {a: &#x27;2-char&#x27;, l: &#x27;char&#x27;, p: &#x27;replace&#x27;, s: &#x27;after&#x27;, d: 300, duration: 400},
  {a: &#x27;2-sp&#x27;, l: &#x27;speech&#x27;, sync: &#x27;with&#x27;, delay: 200})
p.destination = { main: &#x27;[[-&amp;gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="28" name="manager-dog 040 condensed one-shot" tags="replace panelize">
    // --- Art ---
jinx.setDefaults({duration: 400})

p.addArtAssets(
  [&quot;bg-1&quot;, &quot;background/background-1.png&quot;],
  [&quot;1-char&quot;, &quot;1/character.png&quot;],
  [&quot;1-sp&quot;, &quot;1/speech.png&quot;],
  [&quot;2-char&quot;, &quot;2/character.png&quot;],
  [&quot;2-effect&quot;, &quot;2/effect.png&quot;],
  [&quot;2-sp&quot;, &quot;2/speech.png&quot;],
  [&quot;3-char&quot;, &quot;3/character.png&quot;],
  [&quot;3-sp-1&quot;, &quot;3/speech-1.png&quot;],
  [&quot;3-sp-2&quot;, &quot;3/speech-2.png&quot;],
  [&quot;bg-2&quot;, &quot;background/background-2.png&quot;],
  [&quot;4-char&quot;, &quot;4/character.png&quot;],
  [&quot;4-sp-1&quot;, &quot;4/speech-1.png&quot;],
  [&quot;4-sp-2&quot;, &quot;4/speech-2.png&quot;],
  [&quot;4-sp-3&quot;, &quot;4/speech-3.png&quot;]
);

// --- Layers ---
p.addLayers(&quot;bg&quot;, &quot;char&quot;, &quot;speech&quot;, &quot;css-border&quot;);

// --- Sequence ---
// [1]
p.step.create(
  {a: &quot;bg-1&quot;, l: &quot;bg&quot;, u: 300},
  {a: &quot;1-char&quot;, l: &quot;char&quot;, u: 500},
  {a:&quot;1-sp&quot;, l:&quot;speech&quot;, f:&quot;stop&quot;, d: 250, u: 500});
// [2]
p.step.create(
  {a:&quot;1-sp&quot;, l:&quot;speech&quot;, p: &quot;remove&quot;, u: 600},
  {a:&quot;2-effect&quot;, l:&quot;speech&quot;, s: &#x27;after&#x27;, d: 300, u: 200},
  {a: &quot;2-char&quot;, l: &quot;char&quot;, p: &#x27;replace&#x27;, d:550, s:&#x27;after&#x27;, u: 300},
  {a:&quot;2-sp&quot;, l:&quot;speech&quot;, p:&quot;add&quot;, d: 175, u: 200, f:&quot;stop&quot;});
// [3]
p.step.create(
  {p:&#x27;remove&#x27;,a:&#x27;2-sp&#x27;,l:&#x27;speech&#x27;, u: 300},
  {p:&#x27;remove&#x27;,a:&#x27;2-effect&#x27;,l:&#x27;speech&#x27;, u:300, d:75},
  {a: &#x27;bg-2&#x27;, l: &#x27;bg&#x27;, u: 400},
  { a:&#x27;2-char&#x27;, l:&#x27;char&#x27;, d: 200, u: 300},
  {a:&#x27;3-char&#x27;, l:&#x27;char&#x27;, p: &#x27;replace&#x27;, s:&#x27;after&#x27;, d: 200, u: 400},
  {a: &#x27;3-sp-1&#x27;, l:&#x27;speech&#x27;, d: 200, u: 300, f: &#x27;stop&#x27;})
// @
p.step.create({a: &#x27;3-sp-2&#x27;, l:&#x27;speech&#x27;, f:&#x27;stop&#x27;, u: 400})
// [4]
p.step.create(
  {p:&#x27;remove&#x27;,a:&#x27;3-sp-2&#x27;,l:&#x27;speech&#x27;, u: 300},
  {p:&#x27;remove&#x27;,a:&#x27;3-sp-1&#x27;,l:&#x27;speech&#x27;, u:300, d:75},
  {a:&#x27;4-char&#x27;,l:&#x27;char&#x27;,p:&#x27;replace&#x27;, u:300, d:600},
  {a: &#x27;4-sp-1&#x27;, l: &#x27;speech&#x27;, u: 750, d: 800, flow: &#x27;stop&#x27;}
);

p.seq.addSeqel(&quot;4-sp-2&quot;, &quot;speech&quot;, &quot;stop&quot;);
// @
p.seq.addSeqel(&quot;4-sp-3&quot;, &quot;speech&quot;, &quot;end&quot;);
p.destination = { main: &quot;[[-&gt;Start]]&quot; };

  </tw-passagedata>

  <tw-passagedata pid="29" name="New Animation Pipeline" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;,  &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;,  &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;,  &#x27;../numbers300/3.png&#x27;],
  [&#x27;4&#x27;,  &#x27;../numbers300/4.png&#x27;],
  [&#x27;5&#x27;,  &#x27;../numbers300/5.png&#x27;]
);
p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;,  l: &#x27;bg&#x27;,  u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;4&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;5&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;}
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="30" name="ArtAsset Class" tags="replace panelize">
    // window.jinx.__settings.rootArtPath = &#x27;numbers300/&#x27;;

p.addArtAssets(
  {name: &#x27;bg&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/test-bg.png&#x27;},
  {name: &#x27;1&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/numbers300/1.png&#x27;},
  {name: &#x27;2&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/numbers300/2.png&#x27;},
  {name: &#x27;3&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/numbers300/3.png&#x27;},
  {name: &#x27;4&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/numbers300/4.png&#x27;},
  {name: &#x27;5&#x27;, type: &#x27;asset&#x27;, useRoot: false, src: &#x27;test-art/numbers300/5.png&#x27;}
);
p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;3&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;4&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;5&#x27;, l: &#x27;L&#x27;, d: 1000, u: 1000, sync: &#x27;after&#x27;}
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="31" name="custom-effects__loading-refactoring" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;, a: &#x27;bg&#x27;, l: &#x27;bg&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;});

p.step.create(
  {p: &#x27;remove&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;},
  {p: &#x27;remove&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;});

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="32" name="custom-effects__xy-property" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers-loose/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers-loose/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers-loose/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 500, u: 500, sync: &#x27;after&#x27;,
    xy: [200,0]
  },
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  d: 500, u: 500, sync: &#x27;after&#x27;,
    xy: [100,100]
  },
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  d: 500, u: 500, sync: &#x27;after&#x27;,
    xy: [0,200]
  }
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="33" name="custom-effects__xy-property--relative-position" tags="replace panelize">
    jinx.effects.extend(&quot;fadeIn&quot;, &quot;dropIn&quot;, {
  fromPosition: [0,-50],
  position: [0,0]
})

p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers-loose/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers-loose/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers-loose/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 500, u: 500, sync: &#x27;after&#x27;,
    xy: [200,0],
    e: &quot;dropIn&quot;
  },
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  d: 300, u: 500, sync: &#x27;with&#x27;,
    xy: [100,100],
    e: &quot;dropIn&quot;
  },
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  d: 300, u: 500, sync: &#x27;with&#x27;,
    xy: [0,200],
    e: &quot;dropIn&quot;
  }
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="34" name="css-class-passage-tags" tags="replace panelize .big-panel">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;, a: &#x27;bg&#x27;, l: &#x27;bg&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;},
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="35" name="custom-effects__snabbt-whole-effect" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,
   e: {
     fromOpacity: 0,
     opacity: 1,
     duration: 1000,
     easing: function(v){
       return .5-(.5*Math.cos((Math.PI/2*18)*v*v));
     }
   }
  },
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,
   e: {
     fromOpacity: 0,
     opacity: 1,
     duration: 5000,
     delay: 1000,
     easing: function(v){
       return .5-(.5*Math.cos((Math.PI/2*18)*v*v));
     }
   }
  },
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="36" name="custom-effects__snabbt-partial-effect-with-timing" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,
   u: 1000,
   e: {
     fromScale: [0,0],
     toScale: [1,1],
     fromOpacity: 0,
     opacity: 1,
     easing: &quot;easeOut&quot;
   }
  },
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,
   d: 500, u: 1000, s: &#x27;with&#x27;,
   e: {
     fromScale: [2,2],
     scale: [1,1],
     fromOpacity: 0,
     opacity: 1,
     easing: &quot;easeOut&quot;
   }
  }
);

p.step.create(
  {p: &#x27;remove&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,
   u: 1000,
   e: {
     fromPosition: [0,0,0],
     fromOpacity: 1,
     position: [0,150,0],
     opacity: 0,

     easing: &#x27;spring&#x27;,
     springConstant: 0.3,
     springDeceleration: 0.8,
   }
  },
  {p: &#x27;remove&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,
   d: 500, u: 1000, s: &quot;with&quot;,
   e: {
     fromPosition: [0,0,0],
     fromOpacity: 1,
     position: [150,0,0],
     opacity: 0,

     easing: &#x27;spring&#x27;,
     springConstant: 0.3,
     springDeceleration: 0.8,
   }
  }
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="37" name="custom-effects__snabbt-predefined-effect-creation" tags="replace panelize">
    
jinx.createEffect(&quot;fooBar&quot;,
  {
    fromScale: [0,0],
    fromOpacity: 0,
    fromRotation: [0, 2, -.5*Math.PI],

    scale: [1,1],
    opacity: 1,
    rotation: [0,0,0],

    duration: 1000,
    easing: &quot;easeOut&quot;
  }
);

jinx.effects.create(&quot;wibbleWobble&quot;,
  {
    fromScale: [1,1],
    fromOpacity: 1,
    fromRotation: [0,0,0],

    scale: [0,0],
    opacity: 0,
    rotation: [0, 2, -.5*Math.PI],

    duration: 1000,
    easing: &quot;easeIn&quot;
  }
);

p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  e: &quot;fooBar&quot;},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  e: &quot;fooBar&quot;},
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  e: &quot;fooBar&quot;},
);

p.step.create(
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  e: &quot;wibbleWobble&quot;},
  {p: &#x27;remove&#x27;,  a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  e: &quot;wibbleWobble&quot;},
  {p: &#x27;remove&#x27;,  a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  e: &quot;wibbleWobble&quot;},
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="38" name="custom-effects__snabbt-predefined-effect-overridden" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  e: &quot;fadeIn&quot;, d: 500, s: &quot;after&quot;},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  e: &quot;fadeIn&quot;, d: 1000, s: &quot;with&quot;},
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  e: &quot;fadeIn&quot;, d: 2000, s: &quot;with&quot;},
);

p.step.create(
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;, d: 500, e: &quot;fadeOut&quot;},
  {p: &#x27;remove&#x27;,  a: &#x27;2&#x27;,  l: &#x27;L&#x27;, d: 1000, e: &quot;fadeOut&quot;, s: &quot;with&quot;},
  {p: &#x27;remove&#x27;,  a: &#x27;3&#x27;,  l: &#x27;L&#x27;, d: 2000, e: &quot;fadeOut&quot;, s: &quot;with&quot;},
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="39" name="custom-effects__snabbt-predefined-effect-extension" tags="replace panelize">
    
jinx.effects.create(&quot;fizzBuzz&quot;,
  {
    fromScale: [0,0],
    fromOpacity: 0,
    fromRotation: [0, 2, -.5*Math.PI],

    scale: [1,1],
    opacity: 1,
    rotation: [0,0,0],

    duration: 1000,
    easing: &quot;easeOut&quot;
  }
);

jinx.effects.extend(&quot;fizzBuzz&quot;,
  &quot;zipZop&quot;, // including a name will also save it to the list of effects
  {
    fromScale: [5,5],
    duration: 2000,
  }
);

p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  e: &quot;fizzBuzz&quot;},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  e: &quot;zipZop&quot;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  e: jinx.effects.extend(&#x27;fadeOut&#x27;, { fromScale: [1,1], scale: [.8,.8], duration: 1000 }), s: &#x27;after&#x27; } // not including a name will just extend and return a hash
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="40" name="custom-effects__snabbt-callbacks" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200,
    e: jinx.effects.extend(&#x27;fadeIn&#x27;, {
      start: function() {
        $(document).one(&#x27;ended-playing-animation&#x27;, p, function() {
          alert(p.name+&quot; has finished its animation!&quot;);
        });
      }
    })
  },
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 1000, u: 1000},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 1000, u: 1000, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  d: 1000, u: 1000, sync: &#x27;after&#x27;}
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="41" name="transition-steps--pre" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;,  &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;,  &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;,  &#x27;../numbers300/3.png&#x27;]
);
p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;,  l: &#x27;bg&#x27;,  u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   u: 200}
);

p.transition.pre(
  {p: &#x27;remove&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;remove&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;remove&#x27;,     a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   u: 200}
);

p.destination = { main: &#x27;[[-&gt;manager-dog-dummy]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="42" name="transition-steps--post" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;,  &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;,  &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;,  &#x27;../numbers300/3.png&#x27;]
);
p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;,  l: &#x27;bg&#x27;,  u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   u: 200}
);

p.transition.post(
  {p: &#x27;remove&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   u: 200, d: 500},
  {p: &#x27;remove&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   u: 200},
  {p: &#x27;remove&#x27;,     a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   u: 200}
);

p.destination = { main: &#x27;[[-&gt;manager-dog-dummy]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="43" name="seqel-apply--effect" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../numbers-loose/test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers-loose/1.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  u: 500, d:200},
  {p: &#x27;effect&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  u: 1000, d: 250, s: &#x27;after&#x27;, e: {
      position: [250,100],
      easing: jinx.getDefault(&#x27;easing&#x27;)
    }
  },
  {p: &#x27;effect&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  u: 1000, d: 250, s: &#x27;after&#x27;, e: {
      position: [50,200],
      easing: jinx.getDefault(&#x27;easing&#x27;)
    }
  }
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="44" name="panel-art--panel-path" tags="replace panelize">
    p.art.path(&quot;../numbers300/&quot;)

p.addArtAssets(
  {
    name: &#x27;bg&#x27;,
    src: &#x27;../test-bg.png&#x27;,
    path: false
  },
  [&#x27;1&#x27;, &#x27;1.png&#x27;],
  [&#x27;2&#x27;, &#x27;2.png&#x27;],
  [&#x27;3&#x27;, &#x27;3.png&#x27;],
  [&#x27;4&#x27;, &#x27;4.png&#x27;],
  [&#x27;5&#x27;, &#x27;5.png&#x27;]
);
p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;,  l: &#x27;bg&#x27;,  u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;3&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;add&#x27;,     a: &#x27;4&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;5&#x27;,   l: &#x27;L&#x27;,   d: 400, u: 400, sync: &#x27;after&#x27;}
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="45" name="code-seqel" tags="replace panelize">
    p.addArtAssets(
  [&#x27;bg&#x27;, &#x27;../test-bg.png&#x27;],
  [&#x27;1&#x27;, &#x27;../numbers300/1.png&#x27;],
  [&#x27;2&#x27;, &#x27;../numbers300/2.png&#x27;],
  [&#x27;3&#x27;, &#x27;../numbers300/3.png&#x27;]
);

p.addLayers(&#x27;bg&#x27;, &#x27;L&#x27;, &#x27;css-border&#x27;);

p.step.create(
  {
    code: function() {
      console.log(p.name+&quot; has STARTED its animation!&quot;);
    }
  },
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 400, u: 400},
  {p: &#x27;add&#x27;,     a: &#x27;2&#x27;,  l: &#x27;L&#x27;,  d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;remove&#x27;,  a: &#x27;1&#x27;,  l: &#x27;L&#x27;,  d: 400, u: 400, sync: &#x27;after&#x27;},
  {p: &#x27;replace&#x27;, a: &#x27;3&#x27;,  l: &#x27;L&#x27;,  d: 400, u: 400, sync: &#x27;after&#x27;},
  {
    code: function() {
      alert(p.name+&quot; has FINISHED its animation!&quot;);
    },
    sync: &#x27;after&#x27;
  }
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="46" name="text-assets" tags="replace panelize">
    p.art.path(&quot;../numbers300/&quot;)

var textStyle = document.createElement(&#x27;style&#x27;);
textStyle.innerHTML = &quot;.passage--text-assets .layer.text .asset{padding:10px;background-color:white;line-height: 1}&quot;;
$(&#x27;body&#x27;).append(textStyle)

p.addArtAssets(
  {
    name: &#x27;bg&#x27;,
    src: &#x27;../test-bg.png&#x27;,
    path: false
  },
  {
    name: &#x27;text1&#x27;,
    type: &#x27;text&#x27;,
    text: &quot;This text&#x27;s width is set.&quot;,
    size: [270,0]
  },
  {
    name: &#x27;text2&#x27;,
    type: &#x27;text&#x27;,
    text: &quot;This text&#x27;s width and height are set.&quot;,
    size: [125,120]
  },
  {
    name: &#x27;text3&#x27;,
    type: &#x27;text&#x27;,
    text: &quot;This&lt;br&gt;Text&#x27;s&lt;br&gt;height&lt;br&gt;is&lt;br&gt;set.&quot;,
    size: [0,120]
  }
);
p.addLayers(&#x27;bg&#x27;, &#x27;text&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;bg&#x27;, l: &#x27;bg&#x27;, u: 200},
  {p: &#x27;add&#x27;,     a: &#x27;text1&#x27;,  l: &#x27;text&#x27;,  u: 200, xy: [5,5]}
);
p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;text2&#x27;,  l: &#x27;text&#x27;,  u: 200, xy: [5,155]}
);
p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;text3&#x27;,  l: &#x27;text&#x27;,  u: 200, xy: [155,155]}
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>

  <tw-passagedata pid="47" name="custom-asset-classnames" tags="replace panelize">
    var textStyle = document.createElement(&#x27;style&#x27;);
textStyle.innerHTML = (&#x60;
.passage--custom-asset-classnames .layer.text .asset {
  padding:10px;
  background-color:white;
  line-height: 1;
}

.passage--custom-asset-classnames .layer.text .asset.red-text-asset {
  color: #f00;
  background-color: #fcc;
}

.passage--custom-asset-classnames .layer.text .asset.blue-text-asset {
  color: #00f;
  background-color: #ccf;
}
&#x60;);
$(&#x27;body&#x27;).append(textStyle)

p.addArtAssets(
  {
    name: &#x27;red&#x27;,
    type: &#x27;text&#x27;,
    classNames: [&#x27;red-text-asset&#x27;],
    text: &quot;This text asset should be styled red from its custom class.&quot;,
    size: [280,0]
  },
  {
    name: &#x27;blue&#x27;,
    type: &#x27;text&#x27;,
    classNames: [&#x27;blue-text-asset&#x27;],
    text: &quot;This text asset should be styled blue from its custom class.&quot;,
    size: [280,0]
  },
);
p.addLayers(&#x27;text&#x27;);

p.step.create(
  {p: &#x27;add&#x27;,     a: &#x27;red&#x27;,  l: &#x27;text&#x27;, xy: [10,10]},
  {p: &#x27;add&#x27;,     a: &#x27;blue&#x27;,  l: &#x27;text&#x27;, xy: [10,150]},
);

p.destination = { main: &#x27;[[-&gt;Start]]&#x27; };

  </tw-passagedata>


<!-- original passage data -->

<tw-passagedata pid="10" name="Main Test Body" tags="replace">
Twine 2 follows Markdown syntax. This means *italics*, **bold**, and `code()`.

&gt; Everything can change, but not the language that we carry inside us, like a
&gt; world more exclusive and final than one's mother's womb.

-- Italo Calvino

* An unordered list
* Can have many items
* Or just a few

1. Milk
2. Cookies
3. Bread

    function add()
	{
		// this is a code block
        console.log('Freedom is the ability to say that two plus two is ' + (2 + 2));
	};

<img src="http://placehold.it/200x200">

![A test image](http://placehold.it/200x200)

These are internal links: [[Other Passage]], [[foo|Other Passage]], [[bar-&gt;Other Passage]], [[Other Passage&lt;-baz]], [[*foo*|Other Passage]], [[well *foo*->Other Passage]], [[Other Passage<-well *foo*]]

* * *

These are external links, the first of which will be in green because of a user stylesheet: [[http://twinery.org]], [[foo|http://twinery.org]], [[bar-&gt;http://twinery.org]], [[http://twinery.org&lt;-baz]]

* * *

These are broken links: [[Nope]], [[foo|Nope]], [[bar-&gt;Nope]], [[Nope&lt;-baz]]

* * *

Two plus two is &lt;%- 2 + 2 %&gt;.

&lt;% print('The passage div currently contains ' + $('#passages').html()) %&gt;

What's the name of this story? &lt;% print('This story\'s name is ' + story.name) %&gt

What's the name of this passage? &lt;% print('This passage\'s name is ' + passage.name) %&gt;

&lt;% color = 'red'; %&gt;
Color is &lt;%= color %&gt;.

&lt;% s.sound = 'trumpets'; %&gt;
window.state.sound is &lt;%= s.sound %&gt;.

&lt;% if (1 == 1) { %&gt;
One equals **one, bolded**.
&lt;% }; %&gt;

&lt;% if (0 == 1) { %&gt;
Zero equals one.
&lt;% }; %&gt;

[[back->Start]]
</tw-passagedata>

<tw-passagedata pid="2" name="Other Passage">
# Heading 1

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed in gravida lectus. Morbi vitae facilisis velit. Suspendisse hendrerit eu odio vel molestie. Phasellus ullamcorper et felis sed porttitor. Aenean in sollicitudin elit, eu ullamcorper lectus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel ipsum id nulla consectetur eleifend. Maecenas quis ullamcorper magna. Praesent felis nisi, vulputate interdum scelerisque vel, pulvinar vitae velit. Suspendisse hendrerit porttitor eros, eget mattis augue volutpat non. Aenean porttitor est ultricies, rhoncus tellus a, porta est. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.

## Heading 2

Ut sit amet libero non tortor eleifend tristique. Duis odio tellus, elementum convallis bibendum sit amet, ultricies eget mauris. Vivamus at turpis bibendum, vehicula sapien quis, scelerisque nisi. Aliquam blandit accumsan mollis. Sed nec sapien odio. Vestibulum malesuada convallis nisi, a ultricies urna pellentesque a. Suspendisse ut libero nec dolor iaculis dapibus. Sed congue justo libero. Vivamus vitae elit pretium, ullamcorper nunc in, auctor arcu.

### Heading 3

Sed pellentesque vehicula pretium. Suspendisse quis tristique est. Etiam tincidunt arcu sollicitudin dui auctor aliquet. Morbi dictum gravida mauris scelerisque tempus. Nulla quis blandit enim, vel pellentesque eros. Mauris et neque eget nisl egestas dignissim sit amet vulputate diam. Phasellus consectetur lorem venenatis nunc tempor consectetur. Sed auctor molestie vulputate. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras dapibus luctus velit et lobortis. Vestibulum vestibulum posuere felis sed aliquam.

#### Heading 4

Fusce adipiscing mauris a tempus vestibulum. Sed dolor mi, viverra sed facilisis at, semper in nisi. Integer ante dolor, placerat in felis ut, ultricies pellentesque est. Sed non nisl eu nunc rutrum faucibus in eget ligula. Vestibulum lorem libero, mattis sed ullamcorper non, viverra at tellus. Ut eget diam nisi. Praesent pharetra metus sit amet pellentesque ornare. Sed ultricies erat et ligula laoreet tincidunt. Praesent risus leo, vestibulum sit amet ante pulvinar, commodo tempus erat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In condimentum mauris ipsum, in faucibus leo scelerisque ac. Aenean rutrum magna a arcu volutpat pulvinar. Donec mollis faucibus dui eget porta. Nullam ipsum nibh, pulvinar eget auctor sed, tempor quis lectus. Ut pellentesque nisi vel fermentum venenatis.

##### Heading 5

Aliquam lectus tellus, egestas a posuere bibendum, accumsan id nunc. Curabitur eget luctus arcu. Aenean fermentum euismod libero, eu auctor libero pulvinar id. Sed elementum vitae nibh eu viverra. Nulla purus odio, condimentum non iaculis quis, gravida eu nulla. Morbi scelerisque orci eget odio dictum, vel posuere neque ultricies. Aenean libero metus, iaculis ut turpis id, adipiscing commodo mauris. Aenean lobortis volutpat scelerisque. Integer sed nulla vitae nibh ullamcorper ornare. Quisque eget consequat ipsum. Aenean vitae ligula sodales magna tincidunt tempor et sed nisi. Praesent suscipit vehicula magna id ornare. Aliquam fermentum diam erat, vitae feugiat ante ullamcorper eu. Nunc pharetra elit id urna semper volutpat. Maecenas erat tortor, hendrerit ac facilisis ut, euismod tristique justo.

###### Heading 6

Proin sagittis sem quis ullamcorper tempus. Nulla eget gravida dui. Aliquam ornare et eros eget vestibulum. Morbi vitae congue risus. Pellentesque porta sem a nunc aliquam, nec feugiat lacus lacinia. Praesent tristique, lectus eget posuere mollis, sem nisi sollicitudin mauris, at tristique est ligula id augue. Suspendisse vel arcu eget dui ornare ornare non et mi. Aliquam et elit ut sem viverra molestie. In hac habitasse platea dictumst. Etiam iaculis est nibh. Nam vehicula vel mi eget aliquet.
</tw-passagedata>

<tw-passagedata pid="3" name="embed test" tags="replace">
&lt;%= story.render('embedded') %&gt;
</tw-passagedata>

<tw-passagedata pid="4" name="embedded" tags="replace">
Embedding one passage inside another works.
</tw-passagedata>

<tw-passagedata pid="5" name="Test $ function" tags="replace">
&lt;span class="highlighted"&gt;this should be highlighted in yellow, and fade in&lt;/span&gt;

And the entire body should be blue.

&lt;%
$(function()
{
	this.find('.highlighted').css('background-color', 'yellow').hide().fadeIn();
});

$('body').css('background-color', 'blue');

%&gt;

</tw-passagedata>

<tw-passagedata pid="6" name="Test span and div syntax" tags="replace">
[This is shown in brackets.]
[]{.empty}
[This is invisible.]{-}
[This is invisible and has the class empty.]{-.empty}
[This is invisible and has the id empty.]{-#empty}
[This is invisible and has the class empty and the id empty2.]{-.empty#empty2}
[This is a span with the class hello.]{.hello}
[This is a span with the id hello.]{#hello}
[This is a span with the class hello, and the id hello2.]{#hello2.hello}
[You may [nest [spans]{.supernested}]{.nested} as much as you like.]{.hello}

[
This is shown in brackets.
]

[
This is a div with class hello.
]{.hello}

[
This is a div with id hello3.
]{#hello3}

[
This is a div with the class hello, and the id hello4.
]{.hello#hello4}

[
This is an invisible div with class hello.
]{-.hello}

[
This is an invisible div with id hello5.
]{-#hello5}

[
This is an invisible div with the class hello, and the id hello6.
]{-.hello#hello6}

[
You may
[
nest
[
divs
]{.supernested}
]{.nested}
as much as you like.
]{.hello}

[
Sub-header inside generated div
-----
]{#the-divs-id}

[
This should be wrapped in a paragraph.

This also should be, with a [[link that goes nowhere]].

]{#div-id}

</tw-passagedata>

<tw-passagedata pid="7" name="Test comments" tags="replace">
This is a sentence /* with a comment inside it */ like any other.

// this isn't shown

This sentence trails off // into nothingness
</tw-passagedata>


<tw-passagedata pid="13" tags="replace" name="Test 0.2.0 Panel (Shortcut)">
	&lt;%

	$(function(){
  	window.passage.panelize(function(p) {
		  p.addArt("background-art","test-art/background.png");
			p.addArt("character-art","test-art/character.png");
			p.addArt("speech-art","test-art/speech.png");

			p.addLayer("background");
			p.addLayer("character");
			p.addLayer("speech");

			// This is a bad name for this, sorry.
			p.initializeSequence({
				"background-art": "background",
				"character-art": "character",
				"speech-art": "speech"
			});

		  p.destination = { main: "[[Back->Start]]" };
		})
  });

	%&gt;
</tw-passagedata>

<tw-passagedata pid="14" tags="replace" name="Simple Panel (Art and Destination)">
	&lt;%

	$(function(){
  	window.passage.panelize(function(p) {
		  p.addArt("main","test-art/background.png");
		  p.destination = { main: "[[Back->Start]]" };
		})
  });

	%&gt;
</tw-passagedata>

<tw-passagedata pid="15" name="manager-dog-dummy" tags="panelize">
  p.addArt("bga", s.rootArtPath, "background/background-1.png");
  p.addArt("border", s.rootArtPath, "background/border.png");
  p.addArt("char", s.rootArtPath, "1/character.png");
  p.addArt("speech", s.rootArtPath, "1/speech.png");

  p.addLayer("l1");
  p.addLayer("l2");
  p.addLayer("l3");
  p.addLayer("border");

  p.seq.addSeqel("bga",		"l1");
  p.seq.addSeqel("char", 	"l2");
  p.seq.addSeqel("speech",	"l3");
  p.seq.addSeqel("border",	"border");

  p.destination = { main: "[[-&gt;Start]]" };
</tw-passagedata>

<tw-passagedata pid="1701" name="manager-dog-p1-020" tags="panel replace">
&lt;%
  $(function(){
  	window.passage.panelize(function(p) {
		  p.addArt("bga", s.rootArtPath, "background/background.png");
		  p.addArt("border", s.rootArtPath, "background/border.png");
		  p.addArt("char", s.rootArtPath, "1/character.png");
		  p.addArt("speech", s.rootArtPath, "1/speech.png");

		  p.addLayer("l1");
		  p.addLayer("l2");
		  p.addLayer("l3");
		  p.addLayer("border");

		  p.seq.addSeqel("bga",		"l1");
		  p.seq.addSeqel("char", 	"l2");
		  p.seq.addSeqel("speech",	"l3");
		  p.seq.addSeqel("border",	"border");

		  p.destination = { main: "[[-&gt;manager-dog-p2-020]]" };
		})
  });
%&gt;</tw-passagedata>

<tw-passagedata pid="1702" name="manager-dog-p2-020" tags="panel">&lt;%
  $(function(){
  	window.passage.panelize(function(p) {
	  p.addArt("bga", s.rootArtPath, "background/background.png");
	  p.addArt("border", s.rootArtPath, "background/border.png");
	  p.addArt("char", s.rootArtPath, "2/character.png");
	  p.addArt("effect", s.rootArtPath, "2/effect.png");
	  p.addArt("speech", s.rootArtPath, "2/speech.png");

	  p.addLayer("l1");
	  p.addLayer("l2");
	  p.addLayer("l3");
	  p.addLayer("l4");
	  p.addLayer("border")

	  p.seq.addSeqel("bga",		"l1");
	  p.seq.addSeqel("char", 	"l2");
	  p.seq.addSeqel("effect",	"l3");
	  p.seq.addSeqel("speech",	"l4");

	  p.seq.addSeqel("border",	"border");

	  p.destination = { main: "[[-&gt;manager-dog-p3-020]]" };
	})
  });
%&gt;</tw-passagedata>

<tw-passagedata pid="1703" name="manager-dog-p3-020" tags="panel">&lt;%
  $(function(){
    window.passage.panelize(function(p) {
		p.addArt("bga", s.rootArtPath, "background/background.png");
		p.addArt("border", s.rootArtPath, "background/border.png");
		p.addArt("char", s.rootArtPath, "3/character.png");
		p.addArt("sp-1", s.rootArtPath, "3/speech-1.png");
		p.addArt("sp-2", s.rootArtPath, "3/speech-2.png");

		p.addLayer("l1");
		p.addLayer("l2");
		p.addLayer("l3");
		p.addLayer("l4");
		p.addLayer("border")

		p.seq.addSeqel("bga",		"l1");
		p.seq.addSeqel("char", 		"l2");
		p.seq.addSeqel("sp-1",		"l3");
		p.seq.addSeqel("sp-2",		"l4");
		p.seq.addSeqel("border",	"border");

		p.destination = { main: "[[-&gt;manager-dog-p4-020]]" };
	})
  });
%&gt;</tw-passagedata>

<tw-passagedata pid="1704" name="manager-dog-p4-020" tags="panel">&lt;%
  $(function(){
	window.passage.panelize(function(p) {
		p.addArt("bga", s.rootArtPath, "background/background.png");
		p.addArt("border", s.rootArtPath, "background/border.png");
		p.addArt("char", s.rootArtPath, "4/character.png");
		p.addArt("sp-1", s.rootArtPath, "4/speech-1.png");
		p.addArt("sp-2", s.rootArtPath, "4/speech-2.png");
		p.addArt("sp-3", s.rootArtPath, "4/speech-3.png");

		p.addLayer("l1");
		p.addLayer("l2");
		p.addLayer("l3");
		p.addLayer("l4");
		p.addLayer("l5");
		p.addLayer("border")

		p.seq.addSeqel("bga",		"l1");
		p.seq.addSeqel("char", 		"l2");
		p.seq.addSeqel("sp-1",		"l3");
		p.seq.addSeqel("sp-2",		"l4");
		p.seq.addSeqel("sp-3",		"l5");
		p.seq.addSeqel("border",	"border");

		p.destination = { main: "[[-&gt;Start]]" };
	})
  })
%&gt;</tw-passagedata>

<tw-passagedata pid="2101" name="Test Wand Proper Relocation" tags="panel replace">&lt;%
  $(function(){
		window.passage.panelize(function(p) {
			p.addArt("bga", s.rootArtPath, "background/background.png");
			p.addArt("border", s.rootArtPath, "background/border.png");
			p.addArt("char", s.rootArtPath, "4/character.png");
			p.addArt("sp-1", s.rootArtPath, "4/speech-1.png");
			p.addArt("sp-2", s.rootArtPath, "4/speech-2.png");
			p.addArt("sp-3", s.rootArtPath, "4/speech-3.png");

			p.addLayer("l1");
			p.addLayer("l2");
			p.addLayer("l3");
			p.addLayer("l4");
			p.addLayer("l5");
			p.addLayer("border")

			p.seq.addSeqel("bga",		"l1");
			p.seq.addSeqel("char", 		"l2");
			p.seq.addSeqel("sp-1",		"l3");
			p.seq.addSeqel("sp-2",		"l4");
			p.seq.addSeqel("sp-3",		"l5");
			p.seq.addSeqel("border",	"border");

			p.destination = { main: "[[-&gt;Test Wand (Passage)]]" };
		})
  })
%&gt;</tw-passagedata>

<tw-passagedata pid="2110" name="Test Wand (Passage)" tags="panel">
-----

This passage should not cause the wand to move.

To add a new panel, click here: [[Test Wand (Panel)]].

The wand should move to the next panel.

If you click this multiple times, the wand should relocate to the most recent one.

*Note: passage `.active`-ness is weird.  Notice that all these added passages are 'active', whereas (obviously, note the wand) the panel is not.  Keep it in mind.*
</tw-passagedata>

<tw-passagedata pid="2111" name="Test Wand (Panel)" tags="panel">
	&lt;%
	  $(function(){
			window.passage.panelize(function(p) {
				p.addArt("bga", s.rootArtPath, "background/background.png");
				p.addArt("border", s.rootArtPath, "background/border.png");
				p.addArt("sp-3", s.rootArtPath, "4/speech-3.png");

				p.addLayer("l1");
				p.addLayer("l5");
				p.addLayer("border")

				p.seq.addSeqel("bga",		"l1");
				p.seq.addSeqel("sp-3",		"l5");
				p.seq.addSeqel("border",	"border");

				p.destination = { main: "[[-&gt;Start]]" };
			})
	  })
	%&gt;
</tw-passagedata>

<tw-passagedata pid="1710" name="Test Iterative Panel" tags="panel replace">
	&lt;%
	  $(function(){
	  	window.passage.panelize(function(p) {
			  p.addArt("bga", s.rootArtPath, "background/background.png");
			  p.addArt("border", s.rootArtPath, "background/border.png");
			  p.addArt("char", s.rootArtPath, "1/character.png");
			  p.addArt("speech", s.rootArtPath, "1/speech.png");

			  p.addLayer("l1");
			  p.addLayer("l2");
			  p.addLayer("l3");
			  p.addLayer("border");

				// SEQUENCE
			  p.seq.addSeqel("bga", "l1");
				p.seq.addSeqel("border",	"border", "stop");
				//
			  p.seq.addSeqel("char", 	"l2", "stop");
				//
				p.seq.addSeqel("speech",	"l3", "stop");

			  p.destination = { main: "[[-&gt;Start]]" };
			})
	  });
	%&gt;
</tw-passagedata>
<tw-passagedata pid="1720" name="Test One-Shot Manager Dog" tags="replace panel">
	&lt;%
	  $(function(){
	  	window.passage.panelize(function(p) {
				// --- Art ---
			  p.addArt("bga", s.rootArtPath, "background/background.png");
			  p.addArt("1-char", s.rootArtPath, "1/character.png");
			  p.addArt("1-sp", s.rootArtPath, "1/speech.png");

			  p.addArt("2-char", s.rootArtPath, "2/character.png");
				p.addArt("2-effect", s.rootArtPath, "2/effect.png");
				p.addArt("2-sp", s.rootArtPath, "2/speech.png");

				p.addArt("3-char", s.rootArtPath, "3/character.png");
				p.addArt("3-sp-1", s.rootArtPath, "3/speech-1.png");
				p.addArt("3-sp-2", s.rootArtPath, "3/speech-2.png");

				p.addArt("4-char", s.rootArtPath, "4/character.png");
				p.addArt("4-sp-1", s.rootArtPath, "4/speech-1.png");
				p.addArt("4-sp-2", s.rootArtPath, "4/speech-2.png");
				p.addArt("4-sp-3", s.rootArtPath, "4/speech-3.png");

				// --- Layers ---
			  p.addLayer("bg")
				p.addLayer("char");
				p.addLayer("speech");
			  p.addLayer("css-border");

				// --- Sequence ---
				// [1]
			  p.seq.addSeqel("bga", "bg");
			  p.seq.addSeqel("1-char", 	"char");
				p.seq.addSeqel("1-sp",	"speech", "stop");
				// [2]
				p.seq.addSeqel("2-effect", "speech", "replace", "stop")
				// @
				p.seq.addSeqel("2-char", "char", "replace", "on");
				p.seq.addSeqel("2-sp", "speech", "add", "stop");
				// [3]
				p.seq.addSeqel("3-char", "char", "replace", "on");
				p.seq.addSeqel("3-sp-1", "speech", "replace", "stop");
				// @
				p.seq.addSeqel("3-sp-2", "speech", "stop");
				// [4]
				p.seq.addSeqel("4-char", "char", "replace", "on");
				p.seq.addSeqel("4-sp-1", "speech", "replace", "stop");
				// @
				p.seq.addSeqel("4-sp-2", "speech", "stop");
				// @
				p.seq.addSeqel("4-sp-3", "speech", "end");

			  p.destination = { main: "[[-&gt;Start]]" };
			})
	  });
	%&gt;
</tw-passagedata>

<tw-passagedata pid="1731" name="manager-dog-p1 0.3.0" tags="panel replace">&lt;%
  $(function(){
  	window.passage.panelize(function(p) {
		  p.addArt("bga", s.rootArtPath, "background/background.png");
		  p.addArt("char", s.rootArtPath, "1/character.png");
		  p.addArt("speech", s.rootArtPath, "1/speech.png");

		  p.addLayer("bg");
		  p.addLayer("char");
		  p.addLayer("speech");
		  p.addLayer("css-border")

		  p.seq.addSeqel("bga",		"bg");
		  p.seq.addSeqel("char", 	"char");
		  p.seq.addSeqel("speech",	"speech");

		  p.destination = { main: "[[-&gt;manager-dog-p2 0.3.0]]" };
		})
  });
%&gt;</tw-passagedata>
<tw-passagedata pid="1732" name="manager-dog-p2 0.3.0" tags="panel">
&lt;%
  $(function(){
	  	window.passage.panelize(function(p) {
		  p.addArt("bga", s.rootArtPath, "background/background.png");
		  p.addArt("char", s.rootArtPath, "2/character.png");
		  p.addArt("effect", s.rootArtPath, "2/effect.png");
		  p.addArt("speech", s.rootArtPath, "2/speech.png");

		  p.addLayer("bg");
		  p.addLayer("char");
		  p.addLayer("speech");
		  p.addLayer("css-border")

		  p.seq.addSeqel("bga",		"bg");
		  p.seq.addSeqel("char", 	"char");
		  p.seq.addSeqel("effect",	"speech",	"stop");
		  p.seq.addSeqel("speech",	"speech");

		  p.destination = { main: "[[-&gt;manager-dog-p3 0.3.0]]" };
		})
  });
%&gt;
</tw-passagedata>

<tw-passagedata pid="1733" name="manager-dog-p3 0.3.0" tags="panel">&lt;%
  $(function(){
    window.passage.panelize(function(p) {
		p.addArt("bga", s.rootArtPath, "background/background.png");
		p.addArt("char", s.rootArtPath, "3/character.png");
		p.addArt("sp-1", s.rootArtPath, "3/speech-1.png");
		p.addArt("sp-2", s.rootArtPath, "3/speech-2.png");

		p.addLayer("bg");
		p.addLayer("char");
		p.addLayer("speech");
		p.addLayer("css-border")

		p.seq.addSeqel("bga",		"bg");
		p.seq.addSeqel("char", 		"char");
		p.seq.addSeqel("sp-1",		"speech",	"stop");
		p.seq.addSeqel("sp-2",		"speech",	"stop");

		p.destination = { main: "[[-&gt;manager-dog-p4 0.3.0]]" };
	})
  });
	%&gt;</tw-passagedata>

	<tw-passagedata pid="1734" name="manager-dog-p4 0.3.0" tags="panel">&lt;%
	  $(function(){
		window.passage.panelize(function(p) {
			p.addArt('bga', s.rootArtPath, 'background/background.png');
			p.addArt('char', s.rootArtPath, '4/character.png');
			p.addArt('sp-1', s.rootArtPath, '4/speech-1.png');
			p.addArt('sp-2', s.rootArtPath, '4/speech-2.png');
			p.addArt('sp-3', s.rootArtPath, '4/speech-3.png');

			p.addLayer('bg');
			p.addLayer('char');
			p.addLayer('speech');
			p.addLayer('css-border')

			p.seq.addSeqel('bga',		'bg');
			p.seq.addSeqel('char', 		'char');
			p.seq.addSeqel('sp-1',		'speech',	'stop');
			p.seq.addSeqel('sp-2',		'speech',	'stop');
			p.seq.addSeqel('sp-3',		'speech',	'stop');

			p.destination = { main: "[[-&gt;Start]]" };
		})
	  })
	%&gt;</tw-passagedata>

  <tw-passagedata pid="1741" name="manager-dog 0.4.0" tags="panel replace">&lt;%
	  $(function(){
		window.passage.panelize(function(p) {
			// --- Art ---
			p.addArt("bga", s.rootArtPath, "background/background.png");
			p.addArt("1-char", s.rootArtPath, "1/character.png");
			p.addArt("1-sp", s.rootArtPath, "1/speech.png");

			p.addArt("2-char", s.rootArtPath, "2/character.png");
			p.addArt("2-effect", s.rootArtPath, "2/effect.png");
			p.addArt("2-sp", s.rootArtPath, "2/speech.png");

			// --- Layers ---
			p.addLayer("bg")
			p.addLayer("char");
			p.addLayer("speech");
			p.addLayer("css-border");

			// --- Old Sequence ---
			/*
			// [1]
			p.seq.addSeqel("bga", "bg");
			p.seq.addSeqel("1-char", 	"char");
			p.seq.addSeqel("1-sp",	"speech", "stop");
			// [2]
			p.seq.addSeqel("2-effect", "speech", "replace", "stop")
			// @
			p.seq.addSeqel("2-char", "char", "replace", "on");
			p.seq.addSeqel("2-sp", "speech", "add", "stop");

			p.destination = { main: "[[-&gt;Start]]" };
			*/

			// --- Step-Built Snabbt Sequence ---
			// function _step_[function]() { defined }
			// Panel.step.[function] = _.bind( _step_[function], Panel.seq )
			// the step constructors are bound to the sequence, even though they're accessed at the top level of the panel?
			// possibly we keep Panel.seq.  I dunno!  This will all be sort of moot once we have custom markup and can just pass a hash of panel properties that the user won't ever see

			// p.step.setup({"bga":"bg"}, {"1-char", "char"}, {"1-sp", "speech"})
			//     step.setup is for setting up a static panel step with no animation in it.  Best for setting up inital states.
			//     it takes arguments[] of key-value pairs representing artAsset: layer assignments.  Seqels get added in order, and the last one gets a "stop" flow.

      // [a]sset, [l]ayer, [d]elay, [f]low, [s]ync, a[p]ply, [e]ffect

      p.step.create({asset: "bga", layer: "bg"},
										{asset: "1-char", layer: "char"},
										{asset: "1-sp", layer: "speech", sync: "after", flow: "stop"});


      p.step.create({apply: "remove", layer: "speech"},
										{asset: '2-effect', layer: 'speech', sync: 'after', delay: 500},
										{asset: "2-char", layer: "char", apply: "replace", sync: "after", delay: 200},
										{asset: '2-sp', layer: 'speech', delay: 400, flow: "end"});

			// if typeof delay == string then convert it to integer. if still bad then it's bad no question and throw an error
      p.destination = { main: "[[-&gt;Start]]" };
		})
	});
	%&gt;
  </tw-passagedata>

  <tw-passagedata pid="1742" name="manager-dog 0.4.0 condensed" tags="replace">&lt;%
	  $(function(){
		window.passage.panelize(function(p) {
      p.addArtAssets(
        ['bga','background/background.png'], ['1-char', '1/character.png'], ['1-sp', '1/speech.png'],
        ['2-char', '2/character.png'], ['2-effect', '2/effect.png'], ['2-sp', '2/speech.png']
      );

      p.addLayers('bg', 'char', 'speech', 'css-border')

      // [a]sset, [l]ayer, [d]elay, [f]low, [s]ync, a[p]ply, [e]ffect
p.step.create({a: 'bga', l: 'bg'},
							{a: '1-char', l: 'char'},
							{a: '1-sp', l: 'speech', s: 'after'});
p.step.create({p: 'remove', l: 'speech'},
							{a: '2-effect', l: 'speech', s: 'after', d: 500},
							{a: '2-char', l: 'char', p: 'replace', s: 'after', d: 200},
							{a: '2-sp', l: 'speech', d: 400})
			// if typeof delay == string then convert it to integer. if still bad then it's bad no question and throw an error
      p.destination = { main: '[[-&gt;Start]]' };
		})
	});
	%&gt;</tw-passagedata>

</tw-storydata>


<script src="jinx.js"></script>
</body>
</html>
